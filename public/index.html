<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Trang chủ — Đặt vé tàu</title>

  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="/public/css/style.css" rel="stylesheet">
</head>
<body>
  <!-- Navbar -->
  <nav class="navbar navbar-expand-lg navbar-dark bg-primary sticky-top">
    <div class="container-fluid">
      <a class="navbar-brand" href="#">Đặt Vé Tàu</a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navMenu" aria-controls="navMenu" aria-expanded="false" aria-label="Chuyển đổi điều hướng">
        <span class="navbar-toggler-icon"></span>
      </button>

      <div class="collapse navbar-collapse" id="navMenu">
        <ul class="navbar-nav me-auto mb-2 mb-lg-0">
          <li class="nav-item"><a class="nav-link active" href="/public/index.html">Trang chủ</a></li>
          <li class="nav-item"><a class="nav-link" href="/public/trains.html">Tàu</a></li>
          <li class="nav-item"><a class="nav-link" href="/public/trips.html">Chuyến</a></li>
          <li class="nav-item"><a class="nav-link" href="/public/tickets.html">Vé</a></li>
        </ul>
        <form class="d-flex" role="search" onsubmit="return false;">
          <input class="form-control me-2" type="search" placeholder="Tìm mã chuyến, hành khách..." aria-label="Tìm kiếm">
          <button class="btn btn-light" type="submit">Tìm</button>
        </form>
      </div>
    </div>
  </nav>

  <!-- Main -->
  <main class="container my-4">
    <!-- Hero + Search -->
    <section class="hero mb-4">
      <div class="d-md-flex justify-content-between align-items-center">
        <div>
          <h1 class="h4 mb-1">Tìm chuyến & Đặt vé</h1>
          <p class="mb-0 small-muted">Nhập điểm đi, điểm đến và ngày để tìm chuyến phù hợp. Giao diện demo, chỉ frontend (UI-only).</p>
        </div>
        <div class="mt-3 mt-md-0">
          <div class="d-flex gap-2">
            <button class="btn btn-primary" id="sampleSearchBtn">Tìm chuyến mẫu</button>
            <button class="btn btn-outline-secondary" data-bs-toggle="modal" data-bs-target="#addTripModal">Tạo chuyến (demo)</button>
          </div>
        </div>
      </div>

      <form id="searchForm" class="row g-2 mt-3">
        <div class="col-12 col-md-3">
          <label class="form-label small mb-1">Điểm đi</label>
          <input class="form-control" id="from" placeholder="VD: Hà Nội" required>
        </div>
        <div class="col-12 col-md-3">
          <label class="form-label small mb-1">Điểm đến</label>
          <input class="form-control" id="to" placeholder="VD: Hải Phòng" required>
        </div>
        <div class="col-12 col-md-2">
          <label class="form-label small mb-1">Ngày</label>
          <input type="date" class="form-control" id="date" required>
        </div>
        <div class="col-6 col-md-2">
          <label class="form-label small mb-1">Số hành khách</label>
          <input type="number" class="form-control" id="passengers" min="1" value="1">
        </div>
        <div class="col-6 col-md-2 d-grid align-self-end">
          <button type="submit" class="btn btn-primary">Tìm chuyến</button>
        </div>
      </form>
    </section>

    <!-- Stats -->
    <section class="mb-4">
      <div class="row g-3">
        <div class="col-6 col-md-3">
          <div class="card p-3 stat-card">
            <h6 class="text-muted mb-1">Chuyến hôm nay</h6>
            <h4 class="mb-0">18</h4>
            <p class="small-muted mb-0">Đã lên lịch</p>
          </div>
        </div>
        <div class="col-6 col-md-3">
          <div class="card p-3 stat-card">
            <h6 class="text-muted mb-1">Vé đã bán</h6>
            <h4 class="mb-0">1.240</h4>
            <p class="small-muted mb-0">Trong ngày</p>
          </div>
        </div>
        <div class="col-6 col-md-3">
          <div class="card p-3 stat-card">
            <h6 class="text-muted mb-1">Vé trống</h6>
            <h4 class="mb-0">3.560</h4>
            <p class="small-muted mb-0">Tổng</p>
          </div>
        </div>
        <div class="col-6 col-md-3">
          <div class="card p-3 stat-card">
            <h6 class="text-muted mb-1">Doanh thu (ngày)</h6>
            <h4 class="mb-0">₫ 124.500.000</h4>
            <p class="small-muted mb-0">Ước tính</p>
          </div>
        </div>
      </div>
    </section>

    <div class="row">
      <!-- Results -->
      <div class="col-12 col-lg-8 mb-4">
        <div class="card h-100">
          <div class="card-header d-flex justify-content-between align-items-center">
            <h5 class="mb-0">Kết quả tìm kiếm</h5>
            <small class="text-muted">Giờ địa phương</small>
          </div>
          <div class="card-body">
            <div id="resultsList" class="d-grid gap-3">
              <div class="alert alert-secondary mb-0">Chưa có kết quả. Hãy tìm chuyến.</div>
            </div>
          </div>
        </div>
      </div>

      <!-- Booking summary & quick actions -->
      <div class="col-12 col-lg-4 mb-4">
        <div class="card mb-3">
          <div class="card-header"><strong>Thông tin đặt vé</strong></div>
          <div class="card-body">
            <p class="mb-1 small-muted">Hành khách:</p>
            <h5 id="summaryPassengers">1</h5>

            <p class="mb-1 small-muted mt-3">Chuyến đã chọn:</p>
            <div id="summaryTrip" class="small-muted">Chưa có</div>

            <p class="mb-1 small-muted mt-3">Tạm tính:</p>
            <h5 id="summaryPrice">₫ 0</h5>

            <hr/>
            <button class="btn btn-success w-100" id="proceedBtn" disabled data-bs-toggle="modal" data-bs-target="#confirmBookingModal">Tiến hành đặt</button>
          </div>
        </div>

        <div class="card">
          <div class="card-header"><strong>Hoạt động gần đây</strong></div>
          <div class="card-body">
            <ul class="list-group list-group-flush small">
              <li class="list-group-item">CH-20251030-01: bán 120 vé (10 phút trước)</li>
              <li class="list-group-item">TR-1005: cập nhật giờ (1 giờ trước)</li>
              <li class="list-group-item">Yêu cầu hoàn vé: V-20251030-345 (Hôm qua)</li>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </main>

  <!-- Modals -->
  <!-- Seat selection -->
  <div class="modal fade" id="seatModal" tabindex="-1" aria-labelledby="seatModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg modal-dialog-centered">
      <div class="modal-content">
        <form id="seatForm" onsubmit="return false;">
          <div class="modal-header">
            <h5 class="modal-title" id="seatModalLabel">Chọn chỗ — <span id="seatTripLabel"></span></h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Đóng"></button>
          </div>
          <div class="modal-body">
            <p class="small-muted">Nhấn vào ghế để chọn. Màu xám: sẵn có, xanh: đã chọn, tối: đã bán.</p>
            <div id="carriagesArea"></div>

            <div class="mt-3 d-flex justify-content-between align-items-center">
              <div><strong>Chọn được:</strong> <span id="selectedCount">0</span> ghế</div>
              <div><strong>Tạm tính:</strong> <span id="seatSubtotal">₫ 0</span></div>
            </div>
          </div>
          <div class="modal-footer">
            <button class="btn btn-secondary" data-bs-dismiss="modal">Hủy</button>
            <button id="confirmSeatsBtn" class="btn btn-primary" disabled>Xác nhận chỗ</button>
          </div>
        </form>
      </div>
    </div>
  </div>

  <!-- Confirm booking -->
  <div class="modal fade" id="confirmBookingModal" tabindex="-1" aria-labelledby="confirmBookingModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content">
        <form id="bookingForm" onsubmit="return false;">
          <div class="modal-header">
            <h5 class="modal-title" id="confirmBookingModalLabel">Xác nhận đặt vé</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Đóng"></button>
          </div>
          <div class="modal-body">
            <div class="mb-3">
              <label class="form-label">Tên hành khách</label>
              <input class="form-control" id="bkName" placeholder="Nguyễn Văn A" required>
            </div>
            <div class="mb-3">
              <label class="form-label">Số điện thoại</label>
              <input class="form-control" id="bkPhone" placeholder="09xxxxxxxx" required>
            </div>
            <div class="mb-3">
              <label class="form-label">Email (tuỳ chọn)</label>
              <input class="form-control" id="bkEmail" placeholder="email@domain.com">
            </div>

            <div class="mt-3">
              <p class="mb-1 small-muted">Chi tiết chuyến:</p>
              <div id="confirmTripDetails" class="small-muted"></div>
              <div class="mt-2"><strong>Tổng thanh toán:</strong> <span id="confirmTotal">₫ 0</span></div>
            </div>
          </div>
          <div class="modal-footer">
            <button class="btn btn-secondary" data-bs-dismiss="modal">Hủy</button>
            <button id="finalizeBtn" class="btn btn-success">Xác nhận & Thanh toán (demo)</button>
          </div>
        </form>
      </div>
    </div>
  </div>

  <!-- Ticket demo -->
  <div class="modal fade" id="ticketModal" tabindex="-1" aria-labelledby="ticketModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-md modal-dialog-centered">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="ticketModalLabel">Vé đã đặt (demo)</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Đóng"></button>
        </div>
        <div class="modal-body">
          <p><strong>Mã vé:</strong> <span id="ticketId">V-20251030-001</span></p>
          <p><strong>Hành khách:</strong> <span id="ticketName"></span></p>
          <p><strong>Chuyến:</strong> <span id="ticketTrip"></span></p>
          <p><strong>Ghế:</strong> <span id="ticketSeats"></span></p>
          <p><strong>Tổng:</strong> <span id="ticketTotal"></span></p>
          <hr/>
          <p class="small-muted">Bản demo: hệ thống chưa kết nối backend.</p>
        </div>
        <div class="modal-footer">
          <button class="btn btn-primary" data-bs-dismiss="modal">Đóng</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Add Trip (demo) -->
  <div class="modal fade" id="addTripModal" tabindex="-1" aria-labelledby="addTripModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content">
        <form id="addTripForm" onsubmit="return false;">
          <div class="modal-header">
            <h5 class="modal-title" id="addTripModalLabel">Tạo chuyến mới (demo)</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Đóng"></button>
          </div>
          <div class="modal-body">
            <div class="mb-3">
              <label class="form-label">Mã chuyến</label>
              <input class="form-control" id="newTripId" placeholder="VD: CH-20251030-03" required>
            </div>
            <div class="mb-3">
              <label class="form-label">Mã tàu</label>
              <input class="form-control" id="newTripTrain" placeholder="VD: TR-1010" required>
            </div>
            <div class="mb-3">
              <label class="form-label">Tuyến (Đi → Đến)</label>
              <input class="form-control" id="newTripRoute" placeholder="VD: Hà Nội → Vinh" required>
            </div>
            <div class="mb-3">
              <label class="form-label">Giá vé (₫)</label>
              <input type="number" class="form-control" id="newTripPrice" value="100000" min="0" required>
            </div>
          </div>
          <div class="modal-footer">
            <button class="btn btn-secondary" data-bs-dismiss="modal">Hủy</button>
            <button id="saveTripBtn" class="btn btn-primary">Lưu chuyến (demo)</button>
          </div>
        </form>
      </div>
    </div>
  </div>

  <!-- Scripts -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
  <script src="/public/js/app.js"></script>
</body>
</html>